# Hardhat å¯åŠ¨è¯¦ç»†æ­¥éª¤æŒ‡å—

## ğŸ“‹ å‰ç½®æ¡ä»¶æ£€æŸ¥

### 1. æ£€æŸ¥ Node.js ç‰ˆæœ¬
```powershell
node --version
```
**è¦æ±‚ï¼š** Node.js ç‰ˆæœ¬ >= 20

### 2. æ£€æŸ¥ npm ç‰ˆæœ¬
```powershell
npm --version
```
**è¦æ±‚ï¼š** npm ç‰ˆæœ¬ >= 7.0.0

---

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šè¿›å…¥é¡¹ç›®ç›®å½•

```powershell
cd E:\Spring\Zama\fhevm-hardhat-template
```

**éªŒè¯ï¼š** ç¡®ä¿å½“å‰ç›®å½•åŒ…å« `hardhat.config.ts` æ–‡ä»¶
```powershell
Test-Path hardhat.config.ts
```
åº”è¯¥è¿”å› `True`

---

## ğŸ“¦ ç¬¬äºŒæ­¥ï¼šå®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æœªå®‰è£…ï¼‰

```powershell
npm install
```

**é¢„æœŸè¾“å‡ºï¼š** 
- å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…
- å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´
- å®Œæˆååº”è¯¥çœ‹åˆ°ç±»ä¼¼ `added 770 packages` çš„æç¤º

---

## ğŸ” ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

### 3.1 è®¾ç½® MNEMONICï¼ˆåŠ©è®°è¯ï¼‰

```powershell
npx hardhat vars set MNEMONIC
```

**å½“æç¤º "Enter value:" æ—¶ï¼Œè¾“å…¥ä»¥ä¸‹é»˜è®¤æµ‹è¯•åŠ©è®°è¯ï¼š**
```
test test test test test test test test test test test junk
```

**æ³¨æ„ï¼š** 
- ç›´æ¥å¤åˆ¶ç²˜è´´ä¸Šé¢çš„åŠ©è®°è¯
- ä¸è¦åªæŒ‰å›è½¦ï¼ˆä¼šæŠ¥é”™ï¼‰
- è¾“å…¥å®ŒæˆåæŒ‰å›è½¦ç¡®è®¤

### 3.2 éªŒè¯è®¾ç½®ï¼ˆå¯é€‰ï¼‰

```powershell
npx hardhat vars list
```

åº”è¯¥æ˜¾ç¤º `MNEMONIC` å·²è®¾ç½®

### 3.3 è®¾ç½®å…¶ä»–ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼Œç”¨äºæµ‹è¯•ç½‘ï¼‰

å¦‚æœéœ€è¦éƒ¨ç½²åˆ° Sepolia æµ‹è¯•ç½‘ï¼š
```powershell
npx hardhat vars set INFURA_API_KEY
# è¾“å…¥ä½ çš„ Infura API Key

npx hardhat vars set ETHERSCAN_API_KEY
# è¾“å…¥ä½ çš„ Etherscan API Keyï¼ˆç”¨äºåˆçº¦éªŒè¯ï¼‰
```

---

## ğŸ”¨ ç¬¬å››æ­¥ï¼šç¼–è¯‘åˆçº¦

```powershell
npm run compile
```

**é¢„æœŸè¾“å‡ºï¼š**
```
Compiled 7 Solidity files successfully (evm target: cancun).
Successfully generated 38 typings!
```

**å¦‚æœç¼–è¯‘å¤±è´¥ï¼š**
- æ£€æŸ¥é”™è¯¯ä¿¡æ¯
- ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²æ­£ç¡®å®‰è£…

---

## âœ… ç¬¬äº”æ­¥ï¼šè¿è¡Œæµ‹è¯•ï¼ˆéªŒè¯ç¯å¢ƒï¼‰

```powershell
npm run test
```

**é¢„æœŸè¾“å‡ºï¼š**
```
FHECounter
  âœ” encrypted count should be uninitialized after deployment
  âœ” increment the counter by 1
  âœ” decrement the counter by 1

3 passing
```

**å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œè¯´æ˜ç¯å¢ƒé…ç½®æ­£ç¡®ï¼**

---

## ğŸƒ ç¬¬å…­æ­¥ï¼šå¯åŠ¨ Hardhat æœ¬åœ°èŠ‚ç‚¹

### 6.1 æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£

**é‡è¦ï¼š** ä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£æ‰“å¼€ï¼Œä¸è¦å…³é—­ï¼

### 6.2 åœ¨æ–°ç»ˆç«¯ä¸­è¿›å…¥é¡¹ç›®ç›®å½•

```powershell
cd E:\Spring\Zama\fhevm-hardhat-template
```

### 6.3 å¯åŠ¨èŠ‚ç‚¹

```powershell
npx hardhat node
```

**é¢„æœŸè¾“å‡ºï¼š**
```
Started HTTP and WebSocket server on http://127.0.0.1:8545/

Accounts:
Account #0: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 (10000 ETH)
Account #1: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (10000 ETH)
Account #2: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC (10000 ETH)
...
```

**å…³é”®ä¿¡æ¯ï¼š**
- âœ… RPC åœ°å€ï¼š`http://127.0.0.1:8545`
- âœ… Chain IDï¼š`31337`
- âœ… é»˜è®¤è´¦æˆ·ï¼šæ¯ä¸ªè´¦æˆ·æœ‰ 10000 ETHï¼ˆæµ‹è¯•å¸ï¼‰

**âš ï¸ é‡è¦ï¼š** 
- èŠ‚ç‚¹ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°ä½ æŒ‰ `Ctrl + C` åœæ­¢
- ä¿æŒè¿™ä¸ªç»ˆç«¯çª—å£æ‰“å¼€ï¼
- ä¸è¦å…³é—­è¿™ä¸ªçª—å£ï¼Œå¦åˆ™èŠ‚ç‚¹ä¼šåœæ­¢

---

## ğŸ”— ç¬¬ä¸ƒæ­¥ï¼šé…ç½® MetaMaskï¼ˆå¯é€‰ï¼Œç”¨äºå‰ç«¯äº¤äº’ï¼‰

### 7.1 æ‰“å¼€ MetaMask

### 7.2 æ·»åŠ ç½‘ç»œ

1. ç‚¹å‡» MetaMask é¡¶éƒ¨çš„ç½‘ç»œé€‰æ‹©å™¨
2. ç‚¹å‡»"æ·»åŠ ç½‘ç»œ"æˆ–"æ·»åŠ ç½‘ç»œï¼ˆæ‰‹åŠ¨ï¼‰"
3. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

```
ç½‘ç»œåç§°: Hardhat Local
æ–°å¢ RPC URL: http://127.0.0.1:8545
é“¾ ID: 31337
è´§å¸ç¬¦å·: ETH
åŒºå—æµè§ˆå™¨ URL: (ç•™ç©º)
```

4. ç‚¹å‡»"ä¿å­˜"

### 7.3 å¯¼å…¥æµ‹è¯•è´¦æˆ·ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨ Hardhat æä¾›çš„æµ‹è¯•è´¦æˆ·ï¼š

1. åœ¨ MetaMask ä¸­é€‰æ‹©"å¯¼å…¥è´¦æˆ·"
2. å¤åˆ¶èŠ‚ç‚¹å¯åŠ¨æ—¶æ˜¾ç¤ºçš„è´¦æˆ·ç§é’¥ï¼ˆä» Account #0 ç­‰ï¼‰
3. ç²˜è´´åˆ° MetaMask å¯¼å…¥

**æ³¨æ„ï¼š** è¿™äº›æ˜¯æµ‹è¯•è´¦æˆ·ï¼Œä»…ç”¨äºå¼€å‘ï¼

---

## ğŸ“¤ ç¬¬å…«æ­¥ï¼šéƒ¨ç½²åˆçº¦åˆ°æœ¬åœ°ç½‘ç»œ

### 8.1 æ‰“å¼€å¦ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£

### 8.2 éƒ¨ç½²åˆçº¦

```powershell
cd E:\Spring\Zama\fhevm-hardhat-template
npx hardhat deploy --network localhost
```

**é¢„æœŸè¾“å‡ºï¼š**
```
deploying "FHECounter" (tx: 0x...) ... deployed at 0x...
```

**æ³¨æ„ï¼š** ç¡®ä¿ç¬¬å…­æ­¥ä¸­çš„èŠ‚ç‚¹æ­£åœ¨è¿è¡Œï¼

---

## ğŸ§ª ç¬¬ä¹æ­¥ï¼šä¸åˆçº¦äº¤äº’ï¼ˆå¯é€‰ï¼‰

### 9.1 æŸ¥çœ‹åˆçº¦åœ°å€

```powershell
npx hardhat --network localhost task:address
```

### 9.2 è§£å¯†è®¡æ•°

```powershell
npx hardhat --network localhost task:decrypt-count
```

### 9.3 å¢åŠ è®¡æ•°

```powershell
npx hardhat --network localhost task:increment --value 2
```

### 9.4 å‡å°‘è®¡æ•°

```powershell
npx hardhat --network localhost task:decrement --value 1
```

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `npm run compile` | ç¼–è¯‘åˆçº¦ |
| `npm run test` | è¿è¡Œæµ‹è¯• |
| `npm run clean` | æ¸…ç†æ„å»ºæ–‡ä»¶ |
| `npx hardhat node` | å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹ |
| `npx hardhat deploy --network localhost` | éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ |
| `npx hardhat accounts` | æŸ¥çœ‹è´¦æˆ·åˆ—è¡¨ |
| `npx hardhat vars list` | æŸ¥çœ‹ç¯å¢ƒå˜é‡ |

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1ï¼š`Error HH604: Invalid mnemonic`
**è§£å†³ï¼š** é‡æ–°è®¾ç½® MNEMONIC
```powershell
npx hardhat vars set MNEMONIC
# è¾“å…¥ï¼štest test test test test test test test test test test junk
```

### é—®é¢˜ 2ï¼š`Error HHE3: No Hardhat config file found`
**è§£å†³ï¼š** ç¡®ä¿åœ¨é¡¹ç›®ç›®å½•ä¸­è¿è¡Œå‘½ä»¤
```powershell
cd E:\Spring\Zama\fhevm-hardhat-template
```

### é—®é¢˜ 3ï¼šMetaMask æ— æ³•è¿æ¥
**æ£€æŸ¥ï¼š**
- âœ… èŠ‚ç‚¹æ˜¯å¦æ­£åœ¨è¿è¡Œï¼ˆç»ˆç«¯çª—å£æ˜¯å¦æ‰“å¼€ï¼‰
- âœ… RPC URL æ˜¯å¦æ­£ç¡®ï¼š`http://127.0.0.1:8545`
- âœ… Chain ID æ˜¯å¦æ­£ç¡®ï¼š`31337`
- âœ… ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -ano | findstr :8545`

### é—®é¢˜ 4ï¼šéƒ¨ç½²å¤±è´¥
**æ£€æŸ¥ï¼š**
- âœ… èŠ‚ç‚¹æ˜¯å¦æ­£åœ¨è¿è¡Œ
- âœ… ç½‘ç»œå‚æ•°æ˜¯å¦æ­£ç¡®ï¼š`--network localhost`
- âœ… è´¦æˆ·æ˜¯å¦æœ‰è¶³å¤Ÿçš„ ETHï¼ˆé»˜è®¤æœ‰ 10000 ETHï¼‰

---

## ğŸ¯ å®Œæ•´å¯åŠ¨æµç¨‹æ€»ç»“

```powershell
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd E:\Spring\Zama\fhevm-hardhat-template

# 2. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npm install

# 3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
npx hardhat vars set MNEMONIC
# è¾“å…¥ï¼štest test test test test test test test test test test junk

# 4. ç¼–è¯‘åˆçº¦
npm run compile

# 5. è¿è¡Œæµ‹è¯•
npm run test

# 6. å¯åŠ¨èŠ‚ç‚¹ï¼ˆåœ¨æ–°ç»ˆç«¯çª—å£ï¼‰
npx hardhat node

# 7. éƒ¨ç½²åˆçº¦ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£ï¼‰
npx hardhat deploy --network localhost
```

---

## âœ… éªŒè¯èŠ‚ç‚¹è¿è¡ŒçŠ¶æ€

æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«ç›‘å¬ï¼š
```powershell
netstat -ano | findstr :8545
```

å¦‚æœçœ‹åˆ°è¾“å‡ºï¼Œè¯´æ˜èŠ‚ç‚¹æ­£åœ¨è¿è¡Œï¼

---

**ç¥å¼€å‘æ„‰å¿«ï¼** ğŸš€





